{"ast":null,"code":"import axios from \"../helpers/axios\";\nimport { userConstants } from \"./constants\";\nexport const userSignIn = form => {\n  return async dispatch => {\n    dispatch({\n      type: userConstants.USER_LOGIN_REQUEST\n    });\n    await axios.post('/user/signin', form).then(res => {\n      if (res.status === 200) {\n        const token = res.data.token;\n        const user = res.data.user;\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', JSON.stringify(user));\n        dispatch({\n          type: userConstants.USER_LOGIN_SUCCESS,\n          payload: {\n            token,\n            user\n          }\n        });\n      } else {\n        dispatch({\n          type: userConstants.USER_LOGIN_FAILURE,\n          payload: {\n            message: res.data.message\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: userConstants.USER_LOGIN_FAILURE,\n        payload: {\n          message: \"something wrong!\"\n        }\n      });\n    });\n  };\n};\nexport const userUpdate = form => {\n  return async dispatch => {\n    dispatch({\n      type: userConstants.PROFILE_UPDATE_REQUEST\n    });\n    await axios.post('/user/profile/update', form).then(res => {\n      if (res.status === 200) {\n        dispatch({\n          type: userConstants.PROFILE_UPDATE_SUCCESS,\n          payload: {\n            user: res.data.user\n          }\n        });\n      } else {\n        dispatch({\n          type: userConstants.PROFILE_UPDATE_FAILURE,\n          payload: {\n            message: \"Something happend wrong!\"\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: userConstants.PROFILE_UPDATE_FAILURE,\n        payload: {\n          error,\n          message: \"Something happend wrong!\"\n        }\n      });\n    });\n  };\n};\nexport const isUSerLoggedin = () => {\n  return async dispatch => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = JSON.parse(localStorage.getItem('user'));\n      dispatch({\n        type: userConstants.USER_LOGIN_SUCCESS,\n        payload: {\n          token,\n          user\n        }\n      });\n    } else {\n      dispatch({\n        type: userConstants.USER_LOGIN_FAILURE,\n        payload: {\n          message: \"User is not logged in\"\n        }\n      });\n    }\n  };\n};\nexport const logout = () => {\n  return async dispatch => {\n    dispatch({\n      type: userConstants.USER_LOGOUT_REQUEST\n    });\n    window.localStorage.clear();\n    localStorage.removeItem('Dirkey');\n    dispatch({\n      type: userConstants.USER_LOGOUT_SUCCESS,\n      payload: {\n        message: \"Logout successfully\"\n      }\n    });\n  };\n};","map":{"version":3,"sources":["C:/Study/Project2/online-model-test/frontend/src/Actions/user.actions.js"],"names":["axios","userConstants","userSignIn","form","dispatch","type","USER_LOGIN_REQUEST","post","then","res","status","token","data","user","localStorage","setItem","JSON","stringify","USER_LOGIN_SUCCESS","payload","USER_LOGIN_FAILURE","message","catch","error","userUpdate","PROFILE_UPDATE_REQUEST","PROFILE_UPDATE_SUCCESS","PROFILE_UPDATE_FAILURE","isUSerLoggedin","getItem","parse","logout","USER_LOGOUT_REQUEST","window","clear","removeItem","USER_LOGOUT_SUCCESS"],"mappings":"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","sourcesContent":["import axios from \"../helpers/axios\";\r\nimport { userConstants } from \"./constants\";\r\n\r\nexport const userSignIn = (form) => {\r\n    return async dispatch => {\r\n        dispatch({ type: userConstants.USER_LOGIN_REQUEST });\r\n\r\n\r\n        await axios.post('/user/signin', form)\r\n            .then((res) => {\r\n                if (res.status === 200) {\r\n                    const token = res.data.token;\r\n                    const user = res.data.user;\r\n                    localStorage.setItem('token', token);\r\n                    localStorage.setItem('user', JSON.stringify(user));\r\n\r\n                    dispatch({\r\n                        type: userConstants.USER_LOGIN_SUCCESS,\r\n                        payload: {\r\n                            token,\r\n                            user\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: userConstants.USER_LOGIN_FAILURE,\r\n                        payload: {\r\n                            message: res.data.message\r\n                        }\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch((error) => {\r\n                dispatch({\r\n                    type: userConstants.USER_LOGIN_FAILURE,\r\n                    payload: {\r\n                        message: \"something wrong!\"\r\n                    }\r\n                })\r\n\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport const userUpdate = (form) => {\r\n    return async dispatch => {\r\n        dispatch({ type: userConstants.PROFILE_UPDATE_REQUEST });\r\n\r\n\r\n        await axios.post('/user/profile/update', form)\r\n            .then((res) => {\r\n                if (res.status === 200) {\r\n\r\n                    dispatch({\r\n                        type: userConstants.PROFILE_UPDATE_SUCCESS,\r\n                        payload: {\r\n                            user: res.data.user\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: userConstants.PROFILE_UPDATE_FAILURE,\r\n                        payload: {\r\n                            message: \"Something happend wrong!\"\r\n                        }\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch((error) => {\r\n                dispatch({\r\n                    type: userConstants.PROFILE_UPDATE_FAILURE,\r\n                    payload: {\r\n                        error,\r\n                        message: \"Something happend wrong!\"\r\n                    }\r\n                })\r\n\r\n            });\r\n    }\r\n}\r\n\r\nexport const isUSerLoggedin = () => {\r\n\r\n    return async (dispatch) => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            const user = JSON.parse(localStorage.getItem('user'));\r\n            dispatch({\r\n                type: userConstants.USER_LOGIN_SUCCESS,\r\n                payload: {\r\n                    token,\r\n                    user\r\n                }\r\n            })\r\n\r\n        } else {\r\n            dispatch({\r\n                type: userConstants.USER_LOGIN_FAILURE,\r\n                payload: {\r\n                    message: \"User is not logged in\"\r\n                }\r\n            })\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n}\r\nexport const logout = () => {\r\n    return async (dispatch) => {\r\n\r\n        dispatch({ type: userConstants.USER_LOGOUT_REQUEST });\r\n\r\n        window.localStorage.clear();\r\n        localStorage.removeItem('Dirkey');\r\n\r\n        dispatch({\r\n            type: userConstants.USER_LOGOUT_SUCCESS,\r\n            payload: {\r\n                message: \"Logout successfully\"\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}